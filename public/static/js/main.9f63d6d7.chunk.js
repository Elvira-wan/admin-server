(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){e.exports=a.p+"static/media/logo.7ddab8e5.png"},318:function(e,t,a){e.exports=a(577)},359:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){},443:function(e,t,a){},466:function(e,t,a){},575:function(e,t,a){},576:function(e,t,a){},577:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(41),o=a.n(c),l=a(72),i=a(128),s=a(300),u=a(301),m=a(141),p="set_head_title",d="receive_user",h="show_error_msg",f="reset_user",g=a(208),y=a.n(g),b=function(e){y.a.set("user_key",e)},v=function(){return y.a.get("user_key")||{}},E=function(){y.a.remove("user_key")},k="\u9996\u9875";var w=v();var O=Object(i.combineReducers)({headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.user;case h:return Object(m.a)(Object(m.a)({},e),{},{errorMsg:t.errorMsg});case f:return{};default:return e}}}),x=Object(i.createStore)(O,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(s.a))),S=a(22),j=a(23),C=a(25),N=a(24),I=a(44),_=(a(55),a(27)),L=(a(125),a(30)),R=(a(112),a(43)),A=a(20),T=a.n(A),M=(a(98),a(26)),D=a(34),F=a(585),P=a(586),U=a(179),z=a(226),V=a.n(z),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(n){("GET"===a?V.a.get(e,{params:t}):V.a.post(e,t)).then(function(e){n(e.data)}).catch(function(e){M.b.error(e.message)})})},K=function(e,t){return B("/api/login",{username:e,password:t},"POST")},q=function(){return B("https://restapi.amap.com/v3/weather/weatherInfo?city=360111&key=73e3121f8a251a23b0120317c455c46b")},W=function(e){return B("/api/manage/category/list",{parentId:e})},Y=function(e,t){return B("/api/manage/category/add",{parentId:e,categoryName:t},"POST")},J=function(e){var t=e.categoryId,a=e.categoryName;return B("/api/manage/category/update",{categoryId:t,categoryName:a},"POST")},H=function(e){return B("/api/manage/category/info",{categoryId:e})},Z=function(e,t){return B("/api/manage/product/list",{pageNum:e,pageSize:t})},$=function(e){var t=e.pageNum,a=e.pageSize,n=e.searchType,r=e.searchName;return B("/api/manage/product/search",Object(U.a)({pageNum:t,pageSize:a},n,r))},Q=function(e){return B("/api/manage/product/"+(e._id?"update":"add"),e,"POST")},G=function(e,t){return B("/api/manage/product/updateStatus",{productId:e,status:t},"POST")},X=function(e){return B("/api/manage/img/delete",{name:e},"POST")},ee=function(){return B("/api/manage/user/list")},te=function(e){return B("/api/manage/user/"+(e._id?"/update":"add"),e,"POST")},ae=function(e){return B("/api/manage/user/delete",{userId:e},"POST")},ne=function(){return B("/api/manage/role/list")},re=function(e){return B("/apimanage/role/add",{roleName:e},"POST")},ce=function(e){return B("/apimanage/role/update",e,"POST")},oe=function(e){return{type:d,user:e}},le=function(){return E(),{type:f}},ie=a(188),se=a.n(ie),ue=(a(359),function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e.handleSubmit=function(){var t=Object(D.a)(T.a.mark(function t(a){var n,r,c;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,e.formRef.current.validateFields();case 4:return n=t.sent,r=n.username,c=n.password,t.next=8,e.props.login(r,c);case 8:e.props.user.errorMsg?M.b.error("\u8d26\u53f7\u6216\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff01"):M.b.success("\u767b\u5f55\u6210\u529f\uff01"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),M.b.error("\u8d26\u53f7\u5bc6\u7801\u4e0d\u7b26\u5408\u8981\u6c42\uff01");case 15:case"end":return t.stop()}},t,null,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.user;return e&&e._id?r.a.createElement(I.a,{to:"/"}):r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login-header"},r.a.createElement("img",{src:se.a,alt:"logo"}),r.a.createElement("h1",null,"React\u5168\u6808\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("section",{className:"login-content"},r.a.createElement("h3",null,"\u7528\u6237\u767b\u5f55"),r.a.createElement(L.a,{className:"login-form",ref:this.formRef},r.a.createElement(L.a.Item,{name:"username",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u7528\u6237\u540d"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]},r.a.createElement(R.a,{prefix:r.a.createElement(F.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(L.a.Item,{name:"password",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"},{min:4,message:"\u5bc6\u7801\u81f3\u5c114\u4f4d"},{max:12,message:"\u5bc6\u7801\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]},r.a.createElement(R.a,{prefix:r.a.createElement(P.a,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"})),r.a.createElement(L.a.Item,null,r.a.createElement(_.a,{onClick:this.handleSubmit,type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55")))))}}]),a}(n.Component)),me=Object(l.b)(function(e){return{user:e.user}},{login:function(e,t){return function(){var a=Object(D.a)(T.a.mark(function a(n){var r,c,o;return T.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K(e,t);case 2:r=a.sent,console.log(r),0===r.status?(c=r.data,b(c),n(oe(c))):(o=r.msg,n({type:h,errorMsg:o}));case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}})(ue),pe=(a(428),a(142)),de=(a(146),a(66)),he=a(156),fe=function(e){if(!e)return"";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"))};a(431);function ge(e){return r.a.createElement("button",Object.assign({},e,{className:"link-button"}))}a(432);var ye=de.a.confirm,be=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={city:"",weather:"",temperature:"",sysTime:fe(Date.now())},e.getWeather=Object(D.a)(T.a.mark(function t(){var a,n,r,c,o;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:"1"===(a=t.sent).status&&(n=a.lives[0],r=n.city,c=n.weather,o=n.temperature,e.setState({city:r,weather:c,temperature:o}));case 4:case"end":return t.stop()}},t)})),e.getSysTime=function(){e.interValId=setInterval(function(){e.setState({sysTime:fe(Date.now())})},1e3)},e.logout=function(){ye({title:"\u786e\u5b9a\u9000\u51fa\u5417?",icon:r.a.createElement(he.a,null),content:"\u4e00\u65e6\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500",onOk:function(){e.props.logout(),e.props.history.replace("/login")}})},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getWeather(),this.getSysTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interValId)}},{key:"render",value:function(){var e=this.state,t=e.city,a=e.weather,n=e.temperature,c=e.sysTime,o=this.props.user.username,l=this.props.headTitle;return r.a.createElement("div",{className:"header-box"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"Hello, ",o),r.a.createElement(ge,{onClick:this.logout},"\u9000\u51fa")),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"path-box"},l),r.a.createElement("div",{className:"weather-box"},r.a.createElement("span",{className:"date"},c),r.a.createElement("span",{className:"distinct"},t),r.a.createElement("span",{className:"weather"},a," \xa0",n,"\u2103"))))}}]),a}(n.Component),ve=Object(l.b)(function(e){return{user:e.user,headTitle:e.headTitle}},{logout:le})(Object(I.g)(be)),Ee=(a(433),a(79)),ke=a(91),we=a(587),Oe=a(588),xe=a(316),Se=a(589),je=a(590),Ce=a(591),Ne=a(592),Ie=a(593),_e=a(594),Le=[{title:"\u9996\u9875",key:"/home",icon:r.a.createElement(we.a,null),isPublic:!0,disabled:!0},{title:"\u5546\u54c1",key:"/products",icon:r.a.createElement(Oe.a,null),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:r.a.createElement(xe.a,null)},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:r.a.createElement(Se.a,null)}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:r.a.createElement(F.a,null)},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:r.a.createElement(je.a,null)},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:r.a.createElement(Ce.a,null),children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:r.a.createElement(Ne.a,null)},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:r.a.createElement(Ie.a,null)},{title:"\u997c\u56fe",key:"/charts/pie",icon:r.a.createElement(_e.a,null)}]}],Re=Ee.a.SubMenu,Ae=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).getMenuNodes=function(t){var a=e.props.location.pathname;return"/"===a&&e.props.setHeadTitle("\u9996\u9875"),t.map(function(t){if(e.hasAuth(t))return t.children?(t.children.find(function(e){return 0===a.indexOf(e.key)})&&(e.openKey=t.key),r.a.createElement(Re,{key:t.key,title:r.a.createElement("span",null,t.icon,r.a.createElement("span",null,t.title))},e.getMenuNodes(t.children))):(t.key!==a&&0!==a.indexOf(t.key)||e.props.setHeadTitle(t.title),r.a.createElement(Ee.a.Item,{key:t.key,icon:t.icon},r.a.createElement(ke.b,{to:t.key,onClick:function(){return e.props.setHeadTitle(t.title)}},r.a.createElement("span",null,t.title))))})},e.hasAuth=function(t){var a=t.key,n=t.isPublic,r=e.props.user.role.menus,c=e.props.user.username;return!(!n&&"admin"!==c&&-1===r.indexOf(a))||!!t.children&&!!t.children.find(function(e){return-1!==r.indexOf(e.key)})},e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.menuNodes=this.getMenuNodes(Le)}},{key:"render",value:function(){var e=this.props.location.pathname;0===e.indexOf("/product")&&(e="/product");var t=e,a=this.openKey;return r.a.createElement(Ee.a,{theme:"dark",selectedKeys:[t],defaultOpenKeys:[a],mode:"inline"},this.menuNodes)}}]),a}(n.Component),Te=Object(l.b)(function(e){return{user:e.user}},{setHeadTitle:function(e){return{type:p,data:e}}})(Object(I.g)(Ae)),Me=(a(435),a(143)),De=(a(84),a(39)),Fe=(a(578),a(209)),Pe=(a(579),a(310)),Ue=a(315),ze=a(595),Ve=a(596),Be=a(597),Ke=a(80),qe=a.n(Ke),We=a(87),Ye=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{float:"right",width:750,height:280}},r.a.createElement(We.Chart,{scale:{temperature:{min:0},city:{formatter:function(e){return{London:"\u4f26\u6566",Tokyo:"\u4e1c\u4eac"}[e]}}},padding:[30,20,60,40],autoFit:!0,data:[{month:"Jan",city:"Tokyo",temperature:7},{month:"Jan",city:"London",temperature:3.9},{month:"Feb",city:"Tokyo",temperature:6.9},{month:"Feb",city:"London",temperature:4.2},{month:"Mar",city:"Tokyo",temperature:9.5},{month:"Mar",city:"London",temperature:5.7},{month:"Apr",city:"Tokyo",temperature:14.5},{month:"Apr",city:"London",temperature:8.5},{month:"May",city:"Tokyo",temperature:18.4},{month:"May",city:"London",temperature:11.9},{month:"Jun",city:"Tokyo",temperature:21.5},{month:"Jun",city:"London",temperature:15.2},{month:"Jul",city:"Tokyo",temperature:25.2},{month:"Jul",city:"London",temperature:17},{month:"Aug",city:"Tokyo",temperature:26.5},{month:"Aug",city:"London",temperature:16.6},{month:"Sep",city:"Tokyo",temperature:23.3},{month:"Sep",city:"London",temperature:14.2},{month:"Oct",city:"Tokyo",temperature:18.3},{month:"Oct",city:"London",temperature:10.3},{month:"Nov",city:"Tokyo",temperature:13.9},{month:"Nov",city:"London",temperature:6.6},{month:"Dec",city:"Tokyo",temperature:9.6},{month:"Dec",city:"London",temperature:4.8}],interactions:["element-active"]},r.a.createElement(We.Point,{position:"month*temperature",color:"city",shape:"circle"}),r.a.createElement(We.Line,{shape:"smooth",position:"month*temperature",color:"city",label:"temperature"}),r.a.createElement(We.Tooltip,{shared:!0,showCrosshairs:!0}),r.a.createElement(We.Legend,{background:{padding:[5,100,5,36],style:{fill:"#eaeaea",stroke:"#fff"}}})))}}]),a}(n.Component),Je=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:275}},r.a.createElement(We.Chart,{autoFit:!0,data:[{year:"1\u6708",sales:38},{year:"2\u6708",sales:52},{year:"3\u6708",sales:61},{year:"4\u6708",sales:145},{year:"5\u6708",sales:48},{year:"6\u6708",sales:38},{year:"7\u6708",sales:28},{year:"8\u6708",sales:38},{year:"9\u6708",sales:68},{year:"10\u6708",sales:38},{year:"11\u6708",sales:58},{year:"12\u6708",sales:38}],interactions:["active-region"],padding:[30,30,30,50]},r.a.createElement(We.Interval,{position:"year*sales"}),r.a.createElement(We.Tooltip,{shared:!0})))}}]),a}(n.Component),He=(a(443),Pe.a.RangePicker),Ze=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isVisited:!0},e.handleChange=function(t){return function(){return e.setState({isVisited:t})}},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state.isVisited;return r.a.createElement("div",{className:"home"},r.a.createElement(De.a,{className:"home-card",title:"\u5546\u54c1\u603b\u91cf",extra:r.a.createElement(Ue.a,{style:{color:"rgba(0,0,0,.45)"}}),style:{width:250},headStyle:{color:"rgba(0,0,0,.45)"}},r.a.createElement(Fe.a,{value:1128163,suffix:"\u4e2a",style:{fontWeight:"bolder"}}),r.a.createElement(Fe.a,{value:15,valueStyle:{fontSize:15},prefix:"\u5468\u540c\u6bd4",suffix:r.a.createElement("div",null,"%",r.a.createElement(ze.a,{style:{color:"red",marginLeft:10}}))}),r.a.createElement(Fe.a,{value:10,valueStyle:{fontSize:15},prefix:"\u65e5\u540c\u6bd4",suffix:r.a.createElement("div",null,"%",r.a.createElement(Ve.a,{style:{color:"#3f8600",marginLeft:10}}))})),r.a.createElement(Ye,null),r.a.createElement(De.a,{className:"home-content",title:r.a.createElement("div",{className:"home-menu"},r.a.createElement("span",{className:e?"home-menu-active home-menu-visited":"home-menu-visited",onClick:this.handleChange(!0)},"\u8bbf\u95ee\u91cf"),r.a.createElement("span",{className:e?"":"home-menu-active",onClick:this.handleChange(!1)},"\u9500\u552e\u91cf")),extra:r.a.createElement(He,{defaultValue:[qe()("2021/07/30","YYYY/MM/DD"),qe()("2021/08/16","YYYY/MM/DD")],format:"YYYY/MM/DD"})},r.a.createElement(De.a,{className:"home-table-left",title:e?"\u8bbf\u95ee\u8d8b\u52bf":"\u9500\u552e\u8d8b\u52bf",bodyStyle:{padding:0,height:275},extra:r.a.createElement(Be.a,null)},r.a.createElement(Je,null)),r.a.createElement(De.a,{title:"\u4efb\u52a1",extra:r.a.createElement(Be.a,null),className:"home-table-right"},r.a.createElement(Me.a,null,r.a.createElement(Me.a.Item,{color:"green"},"\u65b0\u7248\u672c\u8fed\u4ee3\u4f1a"),r.a.createElement(Me.a.Item,{color:"green"},"\u5b8c\u6210\u7f51\u7ad9\u8bbe\u8ba1\u521d\u7248"),r.a.createElement(Me.a.Item,{color:"red"},r.a.createElement("p",null,"\u8054\u8c03\u63a5\u53e3"),r.a.createElement("p",null,"\u529f\u80fd\u9a8c\u6536")),r.a.createElement(Me.a.Item,null,r.a.createElement("p",null,"\u767b\u5f55\u529f\u80fd\u8bbe\u8ba1"),r.a.createElement("p",null,"\u6743\u9650\u9a8c\u8bc1"),r.a.createElement("p",null,"\u9875\u9762\u6392\u7248"))))))}}]),a}(n.Component),$e=(a(178),a(105)),Qe=(a(167),a(61)),Ge=a(598),Xe=a(317),et=Qe.a.Option,tt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={dataSource:[],subCategory:[],parentId:"0",parentName:"",loading:!0,showLinkButton:0,confirmLoading:!1},e.addRef=r.a.createRef(),e.updateRef=r.a.createRef(),e.getCategory=function(){var t=Object(D.a)(T.a.mark(function t(a){var n;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=a||e.state.parentId,t.next=3,W(a);case 3:0===(n=t.sent).status&&("0"===a?e.setState({dataSource:n.data}):e.setState({subCategory:n.data}),e.setState({loading:!1}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.showsubCates=function(t){e.setState({parentId:t._id,parentName:t.name},function(){e.getCategory()})},e.showCategory=function(){e.setState({parentId:"0",parentName:"",subCategory:[]})},e.showAdd=function(){e.setState({showLinkButton:1})},e.handleAdd=Object(D.a)(T.a.mark(function t(){var a,n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.addRef.current.validateFields();case 3:a=t.sent,n=a.parentId,r=a.categoryName,e.setState({confirmLoading:!0}),Y(n,r),n===e.setState.parentId?e.getCategory():"0"===n&&e.getCategory(n),M.b.success("\u6dfb\u52a0\u6210\u529f"),e.setState({confirmLoading:!1,showLinkButton:0}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),M.b.error("\u586b\u5199\u8868\u5355\u4e0d\u89c4\u8303");case 16:case"end":return t.stop()}},t,null,[[0,13]])})),e.showUpdate=function(t){e.category=t,e.setState({showLinkButton:2})},e.handleUpdate=Object(D.a)(T.a.mark(function t(){var a,n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.category._id,t.next=3,e.updateRef.current.validateFields();case 3:return n=t.sent,r=n.categoryName,e.setState({confirmLoading:!0}),t.prev=6,t.next=9,J({categoryId:a,categoryName:r});case 9:e.getCategory(),e.updateRef.current.resetFields(),e.setState({showLinkButton:0,confirmLoading:!1}),M.b.success("\u4fee\u6539\u6210\u529f"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(6),console.log(t.t0),M.b.error("\u545c\u545c~\u5206\u7c7b\u4fee\u6539\u5931\u8d25");case 19:case"end":return t.stop()}},t,null,[[6,15]])})),e.handleCancel=function(){e.setState({showLinkButton:0})},e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u64cd\u4f5c",width:"30%",render:function(t){return r.a.createElement("div",null,r.a.createElement(ge,{onClick:function(){e.showUpdate(t)}},"\u4fee\u6539\u5206\u7c7b"),"0"===e.state.parentId?r.a.createElement(ge,{onClick:function(){e.showsubCates(t)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]}},{key:"componentDidMount",value:function(){this.getCategory()}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,n=t.subCategory,c=t.parentId,o=t.parentName,l=t.loading,i=t.confirmLoading,s=t.showLinkButton,u="0"===c?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":r.a.createElement("span",null,r.a.createElement(ge,{style:{fontSize:"16px"},onClick:this.showCategory},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),r.a.createElement(Ge.a,null),"\xa0\xa0\xa0",r.a.createElement("span",{style:{fontSize:"14px"}},o)),m=r.a.createElement(_.a,{onClick:e.showAdd,type:"primary",ghost:!0},r.a.createElement(Xe.a,null),r.a.createElement("span",null,"\u6dfb\u52a0"));return r.a.createElement(De.a,{title:u,extra:m},r.a.createElement($e.a,{bordered:!0,loading:l,rowKey:"_id",dataSource:"0"===c?a:n,columns:this.columns,pagination:{pageSize:5,showQuickJumper:!0}}),1===s&&r.a.createElement(de.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===s,onOk:function(){e.handleAdd()},confirmLoading:i,onCancel:this.handleCancel},r.a.createElement(L.a,{ref:this.addRef},r.a.createElement(L.a.Item,{name:"parentId",label:"\u7236\u7c7b\u76ee\u5f55",initialValue:c,hasFeedback:!0,rules:[{required:!0,message:"\u5206\u7c7b\u76ee\u5f55\u5fc5\u987b\u586b\u5199\u54df!"}]},r.a.createElement(Qe.a,{placeholder:"\u9009\u62e9\u60a8\u8981\u6dfb\u52a0\u5206\u7c7b\u7684\u76ee\u5f55"},r.a.createElement(et,{key:"0",value:"0"},"\u4e00\u7ea7\u5206\u7c7b"),a.map(function(e){return r.a.createElement(et,{key:e._id,value:e._id},e.name)}))),r.a.createElement(L.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",hasFeedback:!0,rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199\u54df\uff01"}]},r.a.createElement(R.a,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u60f3\u6dfb\u52a0\u7684\u5206\u7c7b\u540d\u79f0"})))),r.a.createElement(de.a,{title:"\u66f4\u65b0\u5206\u7c7b",visible:2===s,onOk:this.handleUpdate,confirmLoading:i,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(L.a,{ref:this.updateRef},r.a.createElement(L.a.Item,{name:"categoryName",label:"\u5206\u7c7b\u540d\u79f0",hasFeedback:!0,initialValue:void 0===this.category?null:this.category.name,rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u586b\u5199\u54df\uff01"}]},r.a.createElement(R.a,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u60f3\u66f4\u6539\u7684\u5206\u7c7b\u540d\u79f0"})))))}}]),a}(n.Component),at=5,nt="http://localhost:5000/upload/",rt=(a(466),Qe.a.Option),ct=R.a.Search,ot=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).searchRef=r.a.createRef(),e.state={pageLoading:!0,pageNum:1,total:0,productList:[]},e.getProduct=function(){var t=Object(D.a)(T.a.mark(function t(a,n){var r,c,o,l,i,s,u,m;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.searchRef.current.validateFields();case 3:if(r=t.sent,c=r.searchType,void 0===(o=r.searchName)){t.next=12;break}return t.next=9,$({pageNum:a,pageSize:n,searchType:c,searchName:o});case 9:l=t.sent,t.next=15;break;case 12:return t.next=14,Z(a,n);case 14:l=t.sent;case 15:0===l.status?(i=l.data,s=i.pageNum,u=i.total,m=i.list,e.setState({pageNum:s,total:u,productList:m,pageLoading:!1})):M.b.error("\u8bf7\u6c42\u5546\u54c1\u6570\u636e\u5931\u8d25"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),M.b.error("\u83b7\u53d6\u641c\u7d22\u8868\u5355\u6570\u636e\u5931\u8d25");case 21:case"end":return t.stop()}},t,null,[[0,18]])}));return function(e,a){return t.apply(this,arguments)}}(),e.withdrawProduct=function(){var t=Object(D.a)(T.a.mark(function t(a,n){var r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.pageNum,t.next=3,G(a,1===n?0:1);case 3:0===t.sent.status?(e.getProduct(r,at),M.b.success("\u66f4\u65b0\u5546\u54c1\u72b6\u6001\u6210\u529f")):M.b.error("\u66f4\u65b0\u5546\u54c1\u72b6\u6001\u5931\u8d25");case 5:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.pageChange=function(t,a){e.getProduct(t,a)},e.componentDidMount=function(){e.getProduct(e.state.pageNum,at)},e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc",key:"desc",width:"40%"},{title:"\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u72b6\u6001",key:"state",width:"13%",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{fontSize:13,width:50,marginBottom:"5px",display:"inline-block"}},t.status?"\u5728\u552e":"\u5df2\u4e0b\u67b6"),r.a.createElement(_.a,{type:"primary",style:{fontSize:12,width:50,height:30,padding:0},onClick:function(){e.withdrawProduct(t._id,t.status)}},t.status?"\u4e0b\u67b6":"\u4e0a\u67b6"))}},{title:"\u64cd\u4f5c",key:"operate",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{onClick:function(){return e.props.history.push("/product/detail",t)}},"\u8be6\u60c5"),r.a.createElement(ge,{onClick:function(){return e.props.history.push("/product/addupdate",t)}},"\u4fee\u6539"))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageLoading,n=t.total,c=t.productList,o=r.a.createElement(L.a,{ref:this.searchRef,layout:"inline"},r.a.createElement(L.a.Item,{name:"searchType",initialValue:"productName"},r.a.createElement(Qe.a,{style:{width:120}},r.a.createElement(rt,{value:"productName"},"\u6309\u540d\u79f0\u641c\u7d22"),r.a.createElement(rt,{value:"productDesc"},"\u6309\u63cf\u8ff0\u641c\u7d22"))),r.a.createElement(L.a.Item,{name:"searchName",style:{width:120}},r.a.createElement(ct,{placeholder:"\u5173\u952e\u5b57",allowClear:!0,style:{width:150},onSearch:function(){e.getProduct(1,at)}}))),l=r.a.createElement(_.a,{style:{width:90,padding:"4px 0px"},onClick:this.showAdd,type:"primary",ghost:!0},r.a.createElement(Xe.a,null),r.a.createElement("span",{onClick:function(){return e.props.history.push("/product/addupdate")}},"\u6dfb\u52a0\u5546\u54c1"));return r.a.createElement("div",null,r.a.createElement(De.a,{title:o,extra:l},r.a.createElement($e.a,{dataSource:c,columns:this.columns,rowKey:"_id",bordered:!0,loading:a,pagination:{total:n,pageSize:at,showQuickJumper:!0,onChange:function(t){e.pageChange(t,at)}}})))}}]),a}(n.Component),lt=(a(467),a(313)),it=a(314),st=a(117),ut=a(599),mt=(a(580),a(311)),pt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(e){var n;Object(S.a)(this,a),(n=t.call(this,e)).getImgs=function(){return n.state.fileList.map(function(e){return e.name})},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.handleChange=function(){var e=Object(D.a)(T.a.mark(function e(t){var a,r,c,o,l,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,r=t.fileList,console.log(a),"done"!==a.status){e.next=7;break}0===(c=a.response).status?(M.b.success("\u4e0a\u4f20\u6210\u529f\u4e86"),o=c.data,l=o.name,i=o.url,(a=r[r.length-1]).name=l,a.url=i):M.b.error("\u4e0a\u4f20\u5931\u8d25\u4e86"),e.next=12;break;case 7:if("removed"!==a.status){e.next=12;break}return e.next=10,X(a.name);case 10:0===e.sent.status?M.b.success("\u5220\u9664\u56fe\u7247\u6210\u529f"):M.b.error("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 12:n.setState({fileList:r});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var r=[],c=n.props.imgs;return c&&c.length>0&&(r=c.map(function(e,t){return{uid:-t,name:e,status:"done",url:nt+e}})),n.state={previewVisible:!1,previewImage:"",fileList:r},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,c=r.a.createElement("div",null,r.a.createElement(Xe.a,null),r.a.createElement("div",{style:{marginTop:8}},"Upload"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,{action:"/manage/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange,beforeUpload:this.beforeUpload},n.length>=4?null:c),r.a.createElement(de.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"product-img",style:{width:"100%"},src:a})))}}]),a}(n.Component),dt=a(306),ht=a(118),ft=a(307),gt=a.n(ft),yt=a(308),bt=a.n(yt),vt=(a(565),function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(e){var n;Object(S.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e})},n.getDetail=function(){return gt()(Object(ht.convertToRaw)(n.state.editorState.getCurrentContent()))};var r,c=n.props.detail;if(c){var o=bt()(c),l=o.contentBlocks,i=o.entityMap,s=ht.ContentState.createFromBlockArray(l,i);r=ht.EditorState.createWithContent(s)}else r=ht.EditorState.createEmpty();return n.state={editorState:r},n}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement(dt.Editor,{editorState:this.state.editorState,editorStyle:{height:250,border:"1px solid #f1f1f1",padding:"0 30px"},onEditorStateChange:this.onEditorStateChange})}}]),a}(n.Component)),Et=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={options:[]},e.formRef=r.a.createRef(),e.picRef=r.a.createRef(),e.detailRef=r.a.createRef(),e.handleBack=function(){console.log(e.props),e.props.history.goBack()},e.validatePrice=function(e,t,a){(t*=1)>0?a():a("\u4ef7\u683c\u5fc5\u987b\u662f\u5927\u4e8e 0 \u7684\u6570\u503c")},e.initOptions=function(){var t=Object(D.a)(T.a.mark(function t(a){var n,r,c,o,l,i;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a.map(function(e){return{value:e._id,label:e.name,isLeaf:!1}}),r=Object(st.a)(e),c=r.isUpdate,o=r.product,l=o.pCategoryId,i=o.categoryId,c&&"0"!==l?e.setState({options:n},Object(D.a)(T.a.mark(function t(){var a;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.find(function(e){return e.value===l}),t.next=3,e.loadData([a]);case 3:e.formRef.current.setFieldsValue({categoryIds:[l,i]});case 4:case"end":return t.stop()}},t)}))):e.setState({options:n},function(){e.formRef.current.setFieldsValue({categoryIds:[i]})});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.getCategory=function(){var t=Object(D.a)(T.a.mark(function t(a){var n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(a);case 2:if(n=t.sent,r=n.data,"0"!==a){t.next=8;break}e.initOptions(r),t.next=9;break;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.loadData=function(){var t=Object(D.a)(T.a.mark(function t(a){var n,r,c;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=a[0]).loading=!0,t.next=4,e.getCategory(n.value);case 4:r=t.sent,n.loading=!1,r&&r.length>0?(c=r.map(function(e){return{value:e._id,label:e.name,isLeaf:!0}}),n.children=c):n.isLeaf=!0,e.setState({options:Object(it.a)(e.state.options)});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=Object(D.a)(T.a.mark(function t(){var a,n,r,c,o,l,i,s,u,m,p,d,h,f,g,y,b;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(st.a)(e),n=a.formRef,r=a.picRef,c=a.detailRef,o=a.product,l=a.isUpdate,t.prev=1,t.next=4,n.current.validateFields();case 4:return i=t.sent,s=i.name,u=i.desc,m=i.price,1===(p=i.categoryIds).length?(d="0",h=p[0]):(d=p[0],h=p[1]),f=r.current.getImgs(),g=c.current.getDetail(),y={pCategoryId:d,categoryId:h,name:s,desc:u,price:m,imgs:f,detail:g},l&&o._id&&(b=o._id,y._id=b),t.next=16,Q(y);case 16:0===t.sent.status?(M.b.success("\u4fdd\u5b58\u5546\u54c1\u6210\u529f"),e.props.history.goBack()):M.b.success("\u8868\u5355\u63d0\u4ea4\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),M.b.error("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25");case 23:case"end":return t.stop()}},t,null,[[1,20]])})),e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.location.state;this.product=e||{},this.isUpdate=!!e}},{key:"componentDidMount",value:function(){this.getCategory("0")}},{key:"render",value:function(){var e=this.product,t=this.isUpdate,a=this.formRef,n=this.picRef,c=this.detailRef,o=e.name,l=e.desc,i=e.price,s=e.imgs,u=e.detail,m=this.state.options,p=r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{className:"backArrow",onClick:this.handleBack}),r.a.createElement("span",null,t?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1"));return r.a.createElement(De.a,{title:p},r.a.createElement(L.a,{labelCol:{span:2},wrapperCol:{span:10},labelAlign:"left",ref:a},r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u540d\u79f0",name:"name",initialValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0\uff01"}]},r.a.createElement(R.a,null)),r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0",name:"desc",initialValue:l,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0\uff01"}]},r.a.createElement(R.a.TextArea,null)),r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u4ef7\u683c",name:"price",initialValue:i,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c\uff01"},{validator:this.validatePrice}]},r.a.createElement(R.a,{type:"number",prefix:"\uffe5",suffix:"RMB",style:{width:"100%"}})),r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u5206\u7c7b",name:"categoryIds",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u5206\u7c7b\uff01"}]},r.a.createElement(lt.a,{options:m,loadData:this.loadData})),r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u56fe\u7247",name:"imgs"},r.a.createElement(pt,{ref:n,imgs:s})),r.a.createElement(L.a.Item,{label:"\u5546\u54c1\u8be6\u60c5",name:"detail"},r.a.createElement(vt,{ref:c,detail:u})),r.a.createElement(L.a.Item,{style:{marginTop:100},wrapperCol:{offset:3,span:8}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",onClick:this.handleSubmit,block:!0},"\u63d0\xa0\xa0\xa0\xa0\u4ea4"))))}}]),a}(n.Component),kt=(a(566),a(111)),wt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cName:"",cSonName:""},e.getCategoryName=Object(D.a)(T.a.mark(function t(){var a,n,r,c,o,l,i,s,u,m;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.location.state||{},n=a.categoryId,"0"!==(r=a.pCategoryId)){t.next=9;break}return t.next=4,H(n);case 4:c=t.sent,o=c.data.name,e.setState({cName:o}),t.next=17;break;case 9:return t.next=11,Promise.all([H(r),H(n)]);case 11:l=t.sent,i=l[0],s=l[1],u=i.data.name,m=s.data.name,e.setState({cName:u,cSonName:m});case 17:case"end":return t.stop()}},t)})),e.handleBack=function(){e.props.history.goBack()},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getCategoryName()}},{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{className:"backArrow",onClick:this.handleBack}),r.a.createElement("span",null,"\u5546\u54c1\u8be6\u60c5")),t=this.props.location.state||{},a=t.name,n=t.desc,c=t.price,o=t.imgs,l=t.detail,i=this.state,s=i.cName,u=i.cSonName;return r.a.createElement(De.a,{title:e,className:"product-detail"},r.a.createElement(kt.b,null,r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u540d\u79f0:"),r.a.createElement("span",null,a)),r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u63cf\u8ff0:"),r.a.createElement("span",null,n)),r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u4ef7\u683c:"),r.a.createElement("span",null,c+"\u5143")),r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u6240\u5c5e\u5206\u7c7b:"),r.a.createElement("span",null,s+(u?" --\x3e "+u:""))),r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u56fe\u7247:"),void 0===o?null:r.a.createElement("span",null," ",o.map(function(e){return r.a.createElement("img",{src:nt+e,alt:"img",key:e,style:{width:150,height:150,marginRight:10,border:"1px solid black"}})})," ")),r.a.createElement(kt.b.Item,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u8be6\u60c5:"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:l}}))))}}]),a}(n.Component),Ot=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/product",exact:!0,component:ot}),r.a.createElement(I.b,{path:"/product/addupdate",component:Et}),r.a.createElement(I.b,{path:"/product/detail",component:wt}))}}]),a}(n.Component),xt=(a(568),a(312)),St=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={roles:[],currentRole:{},menuList:[{title:"\u5e73\u53f0\u6743\u9650",key:"/",children:Le}],disabled:!0,confirmLoading:!1,loading:!0,visible:!1,expandedKeys:[]},e.formRef=r.a.createRef(),e.getRoles=Object(D.a)(T.a.mark(function t(){var a,n,r,c;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne();case 2:a=t.sent,n=a.status,r=a.data,0===n&&r.length>=0&&(c=r.map(function(e){return e.create_time=fe(e.create_time),e.auth_time=fe(e.auth_time),e}),e.setState({roles:c,loading:!1}));case 6:case"end":return t.stop()}},t)})),e.showAdd=function(){e.setState({visible:1})},e.showSetAthu=function(){e.setState({visible:2})},e.handleCancel=function(){e.setState({visible:!1})},e.handleAdd=Object(D.a)(T.a.mark(function t(){var a,n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.formRef.current.validateFields();case 3:return a=t.sent,n=a.roleName,e.setState({confirmLoading:!0}),t.next=8,re(n);case 8:r=t.sent,0===r.status?(e.getRoles(),e.setState({confirmLoading:!1,visible:!1}),M.b.success("\u6dfb\u52a0\u5bf9\u8c61\u6210\u529f")):M.b.error("\u6dfb\u52a0\u5bf9\u8c61\u5931\u8d25"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),M.b.error("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25");case 16:case"end":return t.stop()}},t,null,[[0,13]])})),e.handleUpdate=Object(D.a)(T.a.mark(function t(){var a,n,r,c,o,l,i;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({confirmLoading:!0}),a=e.props.user.username,n=(new Date).getTime(),r=e.state.currentRole,c=r._id,o=r.menus,l={_id:c,menus:o,auth_name:a,auth_time:n},t.next=7,ce(l);case 7:i=t.sent,0===i.status?l._id===e.props.user.role_id?(e.props.logout(),M.b.success("\u4fee\u6539\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u6210\u529f, \u8bf7\u91cd\u65b0\u767b\u5f55\u4ee5\u66f4\u65b0")):(e.getRoles(),e.setState({confirmLoading:!1,visible:!1}),M.b.success("\u4fee\u6539\u89d2\u8272\u6743\u9650\u6210\u529f")):M.b.error("\u4fee\u6539\u89d2\u8272\u6743\u9650\u5931\u8d25");case 10:case"end":return t.stop()}},t)})),e.handleCheck=function(t){var a=e.state.currentRole;e.setState({currentRole:Object(m.a)(Object(m.a)({},a),{},{menus:t})})},e.setExpandedKeys=function(){var t=e.state.currentRole.menus,a=[];t.length>0&&(a.push("/"),t.map(function(e){return 0===e.indexOf("/charts")?a.push("/charts"):"/product"!==e&&"/category"!==e||a.push("/products"),a})),e.setState({expandedKeys:a})},e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",key:"auth_time"},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name",key:"auth_name"}]}},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.roles,n=t.loading,c=t.disabled,o=t.visible,l=t.confirmLoading,i=t.currentRole,s=t.menuList,u=t.expandedKeys,m=this.columns,p=this.formRef,d=r.a.createElement("div",null,r.a.createElement(_.a,{type:"primary",ghost:!0,onClick:this.showAdd},r.a.createElement(Xe.a,null),"\u521b\u5efa\u7528\u6237"),"\xa0 \xa0",r.a.createElement(_.a,{disabled:c,type:"primary",ghost:!0,onClick:this.showSetAthu},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return r.a.createElement(De.a,{title:d},r.a.createElement($e.a,{bordered:!0,dataSource:a,columns:m,rowKey:"_id",loading:n,pagination:{pageSize:at,showQuickJumper:!0},rowSelection:{type:"radio",onChange:function(t,a){e.setState({disabled:!1,currentRole:a[0]},function(){e.setExpandedKeys()})}}}),r.a.createElement(de.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:1===o,onOk:this.handleAdd,confirmLoading:l,onCancel:this.handleCancel},r.a.createElement(L.a,{ref:p,wrapperCol:{span:12}},r.a.createElement(L.a.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u89d2\u8272\u540d\u79f0\uff01"}]},r.a.createElement(R.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})))),o&&r.a.createElement(de.a,{title:"\u4fee\u6539\u89d2\u8272\u6743\u9650",visible:2===o,onOk:this.handleUpdate,confirmLoading:l,onCancel:this.handleCancel},r.a.createElement(L.a,{wrapperCol:{span:12}},r.a.createElement(L.a.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",initialValue:i.name},r.a.createElement(R.a,{disabled:!0}))),r.a.createElement(xt.a,{checkable:!0,expandedKeys:u,onCheck:this.handleCheck,defaultCheckedKeys:i.menus,treeData:s})))}}]),a}(n.Component),jt=Object(l.b)(function(e){return{user:e.user}},{logout:le})(St),Ct=Qe.a.Option,Nt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e.getInitForm=function(){var t=e.props.user,a=t.username,n=t.phone,r=t.email,c=t.role_id;e.formRef.current.setFieldsValue({username:a,phone:n,email:r,role_id:c})},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getInitForm()}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.roleList;return r.a.createElement(L.a,{labelCol:{span:4},wrapperCol:{span:10},ref:this.formRef},r.a.createElement(L.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]},r.a.createElement(R.a,null)),t._id?null:r.a.createElement(L.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"},{min:4,message:"\u5bc6\u7801\u81f3\u5c114\u4f4d"},{max:12,message:"\u5bc6\u7801\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]},r.a.createElement(R.a.Password,null)),r.a.createElement(L.a.Item,{label:"\u624b\u673a\u53f7",name:"phone",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u624b\u673a\u53f7"},{min:11,message:"\u624b\u673a\u53f7\u5fc5\u987b\u4e3a11\u4f4d"},{max:11,message:"\u624b\u673a\u53f7\u5fc5\u987b\u4e3a1\u4f4d"},{pattern:/^[0-9_]+$/,message:"\u624b\u673a\u53f7\u5fc5\u987b\u4e3a\u7eaf\u6570\u5b57\u7ec4\u6210"}]},r.a.createElement(R.a,null)),r.a.createElement(L.a.Item,{label:"\u90ae\u7bb1",name:"email",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u90ae\u7bb1"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"}]},r.a.createElement(R.a,null)),r.a.createElement(L.a.Item,{label:"\u89d2\u8272",name:"role_id"},r.a.createElement(Qe.a,{style:{width:120},allowClear:!0},a.map(function(e){return r.a.createElement(Ct,{value:e._id,key:e._id},e.name)}))))}}]),a}(n.Component),It=de.a.confirm,_t=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={users:[],loading:!0,confirmLoading:!1,visible:!1,roleList:[]},e.formRef=r.a.createRef(),e.getUser=Object(D.a)(T.a.mark(function t(){var a,n,r,c,o,l;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([ee(),ne()]);case 3:a=t.sent,n=a[0],r=n.status,c=n.data.users,o=a[1].data,l=o.map(function(e){return{_id:e._id,name:e.name}}),e.setState({roleList:l},function(){0===r&&c.length>0?(c=c.map(function(t){t.create_time=fe(t.create_time);var a=e.state.roleList.find(function(e){return e._id===t.role_id});return t.role_name=void 0===a?null:a.name,t}),e.setState({users:c,loading:!1})):M.b.error("\u8bf7\u6c42\u7528\u6237\u6570\u636e\u5931\u8d25")}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])})),e.showAdd=function(){e.user=null,e.setState({visible:!0})},e.showUpdate=function(t){e.user=t,e.setState({visible:!0})},e.showDelete=function(t){var a=Object(st.a)(e).handleDelete;It({title:"\u786e\u5b9a\u5220\u9664".concat(t.username,"\u5417\uff1f"),icon:r.a.createElement(he.a,null),content:"\u4e00\u65e6\u5220\u9664\u4e0d\u53ef\u64a4\u9500\u5594!",maskClosable:!0,onOk:function(){a(t)}})},e.handleAddUpdate=Object(D.a)(T.a.mark(function t(){var a,n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.formRef.current.formRef.current.validateFields();case 3:return a=t.sent,n="\u6dfb\u52a0",e.user&&(a._id=e.user._id,n="\u4fee\u6539"),t.next=8,te(a);case 8:r=t.sent,0===r.status?(e.getUser(),M.b.success(n+"\u7528\u6237\u6210\u529f")):M.b.error(n+"\u7528\u6237\u5931\u8d25"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),M.b.error("\u83b7\u53d6\u6dfb\u52a0\u7528\u6237\u8868\u5355\u6570\u636e\u5931\u8d25");case 17:e.setState({visible:!1});case 18:case"end":return t.stop()}},t,null,[[0,13]])})),e.handleDelete=function(){var t=Object(D.a)(T.a.mark(function t(a){var n;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(a._id);case 2:n=t.sent,0===n.status?(e.getUser(),M.b.success("\u5220\u9664\u7528\u6237\u6210\u529f\uff01")):M.b.error("\u5220\u9664\u7528\u6237\u5931\u8d25\uff01");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleCancel=function(){e.setState({visible:!1})},e}return Object(j.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.columns=[{title:"\u7528\u6237",dataIndex:"username",key:"username"},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u7535\u8bdd",dataIndex:"phone",key:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_name",key:"role_name"},{title:"\u64cd\u4f5c",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{onClick:function(){e.showUpdate(t)}},"\u4fee\u6539"),r.a.createElement(ge,{onClick:function(){e.showDelete(t)}},"\u5220\u9664"))}}]}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.confirmLoading,n=e.visible,c=e.roleList,o=e.loading,l=this.columns,i=this.user||{},s=r.a.createElement(_.a,{type:"primary",ghost:!0,onClick:this.showAdd},r.a.createElement(Xe.a,null),"\u521b\u5efa\u7528\u6237");return r.a.createElement(De.a,{title:s},r.a.createElement($e.a,{bordered:!0,dataSource:t,columns:l,rowKey:"_id",loading:o,pagination:{pageSize:at,showQuickJumper:!0}}),this.state.visible&&r.a.createElement(de.a,{title:i?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:n,onOk:this.handleAddUpdate,confirmLoading:a,onCancel:this.handleCancel},r.a.createElement(Nt,{user:i,ref:this.formRef,roleList:c})))}}]),a}(n.Component),Lt=a(120),Rt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},e.update=function(){e.setState(function(e){return{sales:e.sales.map(function(e){return e+1}),stores:e.stores.reduce(function(e,t){return e.push(t-1),e},[])}})},e.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e,barWidth:29},{name:"\u5e93\u5b58",type:"bar",data:t,barWidth:29}]}},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(_.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(De.a,{title:"\u67f1\u72b6\u56fe\u4e00"},r.a.createElement(Lt.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),At=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},e.update=function(){e.setState(function(e){return{sales:e.sales.map(function(e){return e+1}),stores:e.stores.reduce(function(e,t){return e.push(t-1),e},[])}})},e.getOption=function(e,t){return{title:{text:"\u5f53\u524d\u5546\u54c1\u5e93\u5b58\u91cf"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(_.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(De.a,{title:"\u6298\u7ebf\u56fe\u4e00"},r.a.createElement(Lt.a,{option:this.getOption(t,a)})))}}]),a}(n.Component),Tt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getOption=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:280,name:"\u90ae\u4ef6\u8425\u9500"},{value:204,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:408,name:"\u641c\u7d22\u5f15\u64ce"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},e.getOption2=function(){return{legend:{top:"bottom",lineStyle:{width:"20"}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"\u9762\u79ef\u6a21\u5f0f",type:"pie",radius:[20,100],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:3},data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:280,name:"\u90ae\u4ef6\u8425\u9500"},{value:204,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:408,name:"\u641c\u7d22\u5f15\u64ce"}],labelLine:{length:5}}]}},e}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u997c\u56fe\u4e00"},r.a.createElement(Lt.a,{option:this.getOption(),style:{height:300}})),r.a.createElement(De.a,{title:"\u997c\u56fe\u4e8c"},r.a.createElement(Lt.a,{option:this.getOption2(),style:{height:350}})))}}]),a}(n.Component),Mt=(a(249),a(109)),Dt=(a(250),a(62)),Ft=(a(575),function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Mt.a,{className:"not-found"},r.a.createElement(Dt.a,{span:12,className:"left"}),r.a.createElement(Dt.a,{span:12,className:"right"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),r.a.createElement("div",null,r.a.createElement(_.a,{type:"primary",onClick:function(){return e.props.history.replace("/home")}},"\u56de\u5230\u9996\u9875"))))}}]),a}(n.Component)),Pt=(a(576),pe.a.Content),Ut=pe.a.Footer,zt=pe.a.Sider,Vt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!1},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state.collapsed;return this.props.user._id?r.a.createElement(pe.a,{style:{minHeight:"100vh"}},r.a.createElement(zt,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},r.a.createElement("div",{style:{margin:"15px"},className:"logo"},r.a.createElement("img",{className:"logo-img",src:se.a,alt:"logo",style:{width:"35px",marginLeft:"".concat(e?"8px":"0")}}),r.a.createElement("span",{className:"logo-word",style:{opacity:"".concat(e?"0":"1")}},"\u563b\u563b\u7684\u540e\u53f0")),r.a.createElement(Te,null)),r.a.createElement(pe.a,null,r.a.createElement(ve,{className:"site-layout-background"},"Header"),r.a.createElement(Pt,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},r.a.createElement(I.d,null,r.a.createElement(I.a,{from:"/",to:"/home",exact:!0}),r.a.createElement(I.b,{path:"/home",component:Ze}),r.a.createElement(I.b,{path:"/category",component:tt}),r.a.createElement(I.b,{path:"/product",component:Ot}),r.a.createElement(I.b,{path:"/role",component:jt}),r.a.createElement(I.b,{path:"/user",component:_t}),r.a.createElement(I.b,{path:"/charts/bar",component:Rt}),r.a.createElement(I.b,{path:"/charts/line",component:At}),r.a.createElement(I.b,{path:"/charts/pie",component:Tt}),r.a.createElement(I.b,{component:Ft})))),r.a.createElement(Ut,{style:{textAlign:"center"}},"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"))):r.a.createElement(I.a,{to:"/login"})}}]),a}(n.Component),Bt=Object(l.b)(function(e){return{user:e.user}})(Vt),Kt=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/login",component:me}),r.a.createElement(I.b,{path:"/",component:Bt}))}}]),a}(n.Component),qt=v();qt&&qt._id,o.a.render(r.a.createElement(ke.a,null,r.a.createElement(l.a,{store:x},r.a.createElement(Kt,null))),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.9f63d6d7.chunk.js.map